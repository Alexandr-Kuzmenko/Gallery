!!!
%html
  %head
    %meta{ charset: "utf-8" }/
    = csrf_meta_tags
    = csp_meta_tag
    = javascript_include_tag 'application', 'data-turbolinks-track': 'reload'
    = stylesheet_link_tag 'application', media: 'all', 'data-turbolinks-track': 'reload'
    %script{ src: "https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" }
    %meta{ name: :viewport, content: 'width=device-width, initial-scale=0.8, shrink-to-fit=no' }
  %body
    %header
      .sign_menu.d-flex.align-content-center.flex-wrap{ "aria-label" => "Sign toolbar", role: "toolbar" }
        .mr-auto
          = link_to I18n.t("header.wallpapers_gallery"), root_path, class: 'title_block'
        .btn-group.btn-group-sm.flex-wrap
          %button.btn.dropdown{ id: 'localization' }
            .dropdown-toggle{ "data-toggle": "dropdown", "data-target": "#" }
              = I18n.t("header.localization")
              %b.caret
            .dropdown-menu
              = button_to "En", {locale: :en}, method: :get, class: "btn btn-light"
              = button_to "Ru", {locale: :ru}, method: :get, class: "btn btn-light"
          - if user_signed_in?
            %button.btn
              = link_to I18n.t('active_admin.devise.profile'), user_index_path
            %button.btn
              = link_to I18n.t('active_admin.devise.links.sign_out'), destroy_user_session_path, method: :delete
            %button.btn.disabled
              = I18n.t("header.main_page_welcome", email: current_user.email)
          - else
            %button.btn
              = link_to I18n.t('active_admin.devise.links.sign_up'), new_user_registration_path, id: 'sign_up'
            %button.btn{ id: "#sign_in_modal", "data-target": "#sign_in_modal", "data-toggle": "modal", type: "button" }
              = I18n.t('active_admin.devise.links.sign_in')
            %button.btn
              = link_to fa_icon('google'), user_google_oauth2_omniauth_authorize_path
      -# modal window for log in
      #sign_in_modal.modal.fade{ "aria-hidden": "true", role: "dialog", tabindex: "-1" }
        .modal-dialog.modal-dialog-centered{ role: "document" }
          .modal-content
            .modal-header
              .col-auto.mr-auto
                .btn.btn-outline-primary.disabled
                  Authorization
              .col-auto
                %button.close{ "aria-label": "Close", "data-dismiss": "modal", type: "button" }
                  ×
            .modal-body
              = render "devise/sessions/modal"

    %backgr_field
      #carouselBgWp.carousel.slide.carousel-fade{"data-ride" => "carousel", "data-pause" => "false" }
        .carousel-inner
          - @bg_wallpapers.each do |bgw|
            .carousel-item
              %img.d-block{alt: 'bg_wp', src: bgw.image.url}
              -#.carousel-caption.d-none.d-md-block.align-center
              -#  = link_to 'Watch', wallpaper_path(bgw)

    %content
      %col-left
        #nav_aside.overlay
          %button.btn{id: 'nav_bar_close'}
            = fa_icon 'chevron-left'
          .overlay-content
            = link_to I18n.t('header.main_bar.categories'), categories_path
            %button.btn.btn-secondary.dropdown{ id: 'top5categories' }
              .dropdown-toggle{ "data-toggle": 'dropdown', "data-target": '#' }
                = I18n.t("header.main_bar.top_categories")
                %b.caret
              %ul.dropdown-menu
                - @top_categories.each do |cat|
                  .overlay_menu.li
                    = link_to "#{cat.name}", category_path(cat)
            = link_to I18n.t('header.main_bar.wallpapers'), wallpapers_path
            = link_to I18n.t('header.main_bar.upload'), new_wallpaper_path
        %button.btn{id: 'nav_bar_open'}
          = fa_icon 'navicon'


      %col-mid
        = yield

      %col-right
        .info_text_block{style: 'text-align: center;'}
          %strong Recent comments:
        - @last_comments.each do |comm|
          .info_text_block
            %strong
              - if comm.commentable.nickname?
                = comm.commentable.nickname
              - else
                = comm.commentable.class
                = comm.commentable.id
            prints at:
            = image_tag(comm.wallpaper.image.mini_thumb.url, alt: 'image', class: 'img-fluid')
            = comm.text.truncate(40, omission: '...')
            = link_to '-->watch', wallpaper_path(comm.wallpaper)
        .row
          = paginate @last_comments, param_name: 'comments_page'
      -#%footer
      -#  .btn-toolbar.mt-1{ "aria-label": "Notice toolbar", role: "notice alerts" }
      -#    .btn.btn-block.btn-sm
      -#      - flash.each do |key, value|
      -#        %div{class: "alert alert-#{key} alert-dismissible fade show", role: "alert" }
      -#          %strong
      -#            = value
      -#          %button.close{ "aria-label": "Close", "data-dismiss": "alert", type: "button" }
      -#            %span{ "aria-hidden": "true" } ×
